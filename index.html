<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Game Test</title>
    <style>
        @font-face {
            font-family: 'DeterminationMono';
            src: url('DeterminationMonoWebRegular-Z5oq.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DeterminationMono', 'Courier New', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #000000;
            overflow: hidden;
            position: relative;
        }

        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 99999;
            transition: opacity 0.5s ease;
        }

        .preloader.hide {
            opacity: 0;
            pointer-events: none;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-top: 5px solid #ffffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .center-line {
            position: fixed;
            top: 50%;
            left: -100%;
            width: 100%;
            height: 2px;
            background: white;
            transform: translateY(-50%);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8),
                0 0 20px rgba(255, 255, 255, 0.6),
                0 0 30px rgba(255, 255, 255, 0.4);
            z-index: 1000;
            opacity: 0;
        }

        .center-line.show {
            opacity: 1;
            animation: lineShoot 1.2s cubic-bezier(0.8, 0, 1, 0.2) forwards;
        }

        @keyframes lineShoot {
            0% {
                left: -100%;
            }

            1% {
                left: -99%;
            }

            100% {
                left: 0;
            }
        }

        .center-line.expand {
            animation: expandWhite 1.5s ease forwards;
        }

        @keyframes expandWhite {
            0% {
                height: 2px;
                width: 100%;
                top: 50%;
                left: 0;
                transform: translateY(-50%);
            }

            100% {
                height: 100vh;
                width: 100vw;
                top: 0;
                left: 0;
                transform: translateY(0);
            }
        }

        .container {
            text-align: center;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .game-container {
            position: relative;
            width: 600px;
            height: 500px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            letter-spacing: 2px;
        }

        h1.shake {
            animation: shakeGlitch 1.5s steps(15);
        }

        h1.fall {
            animation: fallDown 1s ease forwards;
        }

        .instruction {
            color: white;
            font-size: 1.2em;
            margin-bottom: 10px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
            letter-spacing: 1px;
        }

        .instruction.shake {
            animation: shakeGlitch 1.5s steps(15);
        }

        .instruction.fall {
            animation: fallDown 1.2s ease forwards;
        }

        .infinity-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            height: 200px;
            transition: opacity 2s ease;
        }

        .infinity-container.fade-out {
            opacity: 0;
        }

        .infinity-container.shake {
            animation: shakeGlitchContainer 1.5s steps(15);
        }

        .infinity-container.fall {
            animation: fallDown 0.8s ease forwards;
        }

        @keyframes shakeGlitch {
            0% {
                transform: translate(0, 0);
            }

            6.67% {
                transform: translate(-10px, 5px);
            }

            13.33% {
                transform: translate(8px, -8px);
            }

            20% {
                transform: translate(-12px, 3px);
            }

            26.67% {
                transform: translate(6px, -10px);
            }

            33.33% {
                transform: translate(-8px, 8px);
            }

            40% {
                transform: translate(10px, -5px);
            }

            46.67% {
                transform: translate(-6px, 12px);
            }

            53.33% {
                transform: translate(12px, -3px);
            }

            60% {
                transform: translate(-5px, 6px);
            }

            66.67% {
                transform: translate(8px, -9px);
            }

            73.33% {
                transform: translate(-11px, 4px);
            }

            80% {
                transform: translate(9px, -7px);
            }

            86.67% {
                transform: translate(-7px, 10px);
            }

            93.33% {
                transform: translate(5px, -6px);
            }

            100% {
                transform: translate(0, 0);
            }
        }

        @keyframes shakeGlitchContainer {
            0% {
                transform: translate(-50%, -50%);
            }

            6.67% {
                transform: translate(-55%, -45%);
            }

            13.33% {
                transform: translate(-45%, -55%);
            }

            20% {
                transform: translate(-58%, -48%);
            }

            26.67% {
                transform: translate(-42%, -52%);
            }

            33.33% {
                transform: translate(-54%, -54%);
            }

            40% {
                transform: translate(-46%, -46%);
            }

            46.67% {
                transform: translate(-52%, -48%);
            }

            53.33% {
                transform: translate(-48%, -52%);
            }

            60% {
                transform: translate(-51%, -49%);
            }

            66.67% {
                transform: translate(-49%, -51%);
            }

            73.33% {
                transform: translate(-53%, -47%);
            }

            80% {
                transform: translate(-47%, -53%);
            }

            86.67% {
                transform: translate(-52%, -50%);
            }

            93.33% {
                transform: translate(-48%, -50%);
            }

            100% {
                transform: translate(-50%, -50%);
            }
        }

        @keyframes shakeGlitchScore {
            0% {
                transform: translate(0, 0);
            }

            6.67% {
                transform: translate(-12px, 6px);
            }

            13.33% {
                transform: translate(10px, -10px);
            }

            20% {
                transform: translate(-8px, 8px);
            }

            26.67% {
                transform: translate(12px, -6px);
            }

            33.33% {
                transform: translate(-10px, 10px);
            }

            40% {
                transform: translate(8px, -8px);
            }

            46.67% {
                transform: translate(-12px, 6px);
            }

            53.33% {
                transform: translate(10px, -10px);
            }

            60% {
                transform: translate(-6px, 8px);
            }

            66.67% {
                transform: translate(9px, -9px);
            }

            73.33% {
                transform: translate(-11px, 5px);
            }

            80% {
                transform: translate(7px, -7px);
            }

            86.67% {
                transform: translate(-9px, 11px);
            }

            93.33% {
                transform: translate(6px, -6px);
            }

            100% {
                transform: translate(0, 0);
            }
        }

        @keyframes fallDown {
            0% {
                opacity: 1;
            }

            100% {
                opacity: 0;
                transform: translateY(150vh) rotate(45deg);
            }
        }

        .infinity-path {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .path-line {
            stroke: rgba(255, 255, 255, 0.8);
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 5, 5;
            animation: pathPulse 3s ease-in-out infinite;
        }

        @keyframes pathPulse {

            0%,
            100% {
                opacity: 0.7;
            }

            50% {
                opacity: 1;
            }
        }

        .dot {
            position: absolute;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: opacity 2s ease, transform 0.1s ease;
            z-index: 10;
        }

        .dot.fade-out {
            opacity: 0;
        }

        .dot1 {
            background: #ff6b6b;
            box-shadow: 0 0 20px #ff6b6b,
                0 0 30px #ff6b6b,
                0 0 40px rgba(255, 107, 107, 0.5);
        }

        .dot2 {
            background: #4ecdc4;
            box-shadow: 0 0 20px #4ecdc4,
                0 0 30px #4ecdc4,
                0 0 40px rgba(78, 205, 196, 0.5);
        }

        .center-target {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40px;
            height: 40px;
            border: 3px dashed rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: pulse 1.5s infinite;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.4);
            transition: opacity 2s ease;
        }

        .center-target.fade-out {
            opacity: 0;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.4);
            }

            50% {
                transform: translate(-50%, -50%) scale(1.3);
                opacity: 0.5;
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
            }
        }

        .score {
            color: white;
            font-size: 1.5em;
            margin-top: 30px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            letter-spacing: 2px;
        }

        .score.shake {
            animation: shakeGlitchScore 1.5s steps(15);
        }

        .score.fall {
            animation: fallDown 1.5s ease forwards;
        }

        .click-zone {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            cursor: pointer;
            z-index: 5;
        }

        .feedback {
            color: #000000;
            font-size: 1.5em;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
            z-index: 1000;
            letter-spacing: 2px;
            margin-bottom: 20px;
            text-shadow: none;
        }

        .feedback.show {
            opacity: 1;
        }

        .feedback.success {
            color: #4ecdc4;
            text-shadow: 0 0 15px #4ecdc4,
                0 0 25px #4ecdc4;
        }

        .feedback.fail {
            color: #ff6b6b;
            text-shadow: 0 0 15px #ff6b6b,
                0 0 25px #ff6b6b;
        }

        .feedback.shake {
            animation: shakeGlitch 1.5s steps(15);
        }

        .feedback.fall {
            animation: fallDown 0.9s ease forwards;
        }

        .floating-hearts-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 10000;
            display: none;
        }

        .floating-hearts-container.active {
            display: block;
        }

        .floating-heart {
            position: absolute;
            font-size: 2em;
            opacity: 0;
            animation: floatAndFade 4s ease-in-out forwards;
        }

        @keyframes floatAndFade {
            0% {
                opacity: 0;
                transform: translateY(0) scale(0.5);
            }

            10% {
                opacity: 1;
                transform: translateY(-20px) scale(1);
            }

            90% {
                opacity: 1;
                transform: translateY(-100px) scale(1);
            }

            100% {
                opacity: 0;
                transform: translateY(-120px) scale(0.8);
            }
        }

        .message-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            color: #000000;
            max-width: 800px;
            max-height: 80vh;
            padding: 40px;
            z-index: 10001;
            opacity: 0;
            overflow-y: auto;
            width: 100%;
        }

        .message-container.show {
            display: block;
        }

        .message-container.fade-in {
            opacity: 1;
            transition: opacity 2s ease;
        }

        .message-container h2 {
            font-size: 2.2em;
            margin-bottom: 30px;
            animation: float 3s ease-in-out infinite;
            letter-spacing: 2px;
        }

        .typewriter {
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite 0.5s;
            letter-spacing: 0.5px;
            max-width: 100%;
            text-align: left;
            position: relative;
        }

        .typewriter span {
            opacity: 0;
            animation: fadeInWord 0.3s ease forwards;
            white-space: pre-wrap;
        }

        @keyframes fadeInWord {
            0% {
                opacity: 0;
                transform: translateY(5px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        .hearts {
            font-size: 2em;
            margin-top: 20px;
            animation: heartBeat 1.5s infinite, float 3s ease-in-out infinite 1s;
            text-align: center;
        }

        @keyframes heartBeat {

            0%,
            100% {
                transform: scale(1);
            }

            25% {
                transform: scale(1.1);
            }

            50% {
                transform: scale(1);
            }
        }

        .exit-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            padding: 10px 20px;
            background: #000000;
            color: #ffffff;
            border: 2px solid #000000;
            font-family: 'DeterminationMono', 'Courier New', monospace;
            font-size: 0.9em;
            cursor: pointer;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            opacity: 0;
            pointer-events: none;
        }

        .exit-button.show {
            opacity: 1;
            pointer-events: auto;
        }

        .exit-button:hover {
            background: #ffffff;
            color: #000000;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .game-container {
                width: 100%;
                max-width: 400px;
            }

            h1 {
                font-size: 2em;
            }

            .instruction {
                font-size: 1em;
                line-height: 1.5;
            }

            .message-container {
                max-width: 100vw;
                width: 100vw;
                padding: 50px 20px;
                box-sizing: border-box;
            }

            .message-container h2 {
                font-size: 1.8em;
            }

            .typewriter {
                font-size: 1em;
                width: 100%;
            }

            .exit-button {
                display: none;
            }
        }
    </style>
</head>

<body>
    <div class="preloader" id="preloader">
        <div class="loader"></div>
    </div>

    <div class="center-line" id="centerLine"></div>
    <div class="floating-hearts-container" id="floatingHeartsContainer"></div>

    <div class="container">
        <div id="gameSection">
            <h1 id="title">RETRO GAME TEST</h1>
            <p class="instruction" id="instruction">Click when the two dots<br>meet in the center!</p>
            <div class="feedback" id="feedback">null</div>

            <div class="game-container">
                <div class="infinity-container" id="infinityContainer">
                    <svg class="infinity-path" viewBox="0 0 400 200">
                        <path class="path-line" id="pathLine" d="" />
                    </svg>
                    <div class="center-target" id="centerTarget"></div>
                    <div class="dot dot1" id="dot1"></div>
                    <div class="dot dot2" id="dot2"></div>
                </div>
            </div>

            <div class="score" id="scoreDiv">SCORE: <span id="score">0</span> / 10</div>
        </div>
    </div>

    <div class="message-container" id="messageContainer">
        <h2>The love I choose</h2>
        <div class="typewriter" id="typewriter">
            <button class="exit-button" id="exitButton">Exit Fullscreen</button>
        </div>
        <div class="hearts">‚ù§Ô∏è</div>
    </div>

    <div class="click-zone" id="clickZone"></div>

    <script>
        const dot1 = document.getElementById('dot1');
        const dot2 = document.getElementById('dot2');
        const clickZone = document.getElementById('clickZone');
        const scoreEl = document.getElementById('score');
        const scoreDiv = document.getElementById('scoreDiv');
        const feedback = document.getElementById('feedback');
        const gameSection = document.getElementById('gameSection');
        const messageContainer = document.getElementById('messageContainer');
        const typewriterEl = document.getElementById('typewriter');
        const centerLine = document.getElementById('centerLine');
        const centerTarget = document.getElementById('centerTarget');
        const pathLine = document.getElementById('pathLine');
        const title = document.getElementById('title');
        const instruction = document.getElementById('instruction');
        const infinityContainer = document.getElementById('infinityContainer');
        const floatingHeartsContainer = document.getElementById('floatingHeartsContainer');
        const exitButton = document.getElementById('exitButton');

        const imageUrls = [
            './Images/1.jpeg',
            './Images/2.jpeg',
            './Images/3.jpeg',
            './Images/4.jpeg'
        ];

        let score = 0;
        let t1 = 0;
        let t2 = Math.PI;
        const speed = 0.015;
        const targetScore = 10;
        let firstClick = false;

        // Preloader
        window.addEventListener('load', () => {
            const preloader = document.getElementById('preloader');

            // Check if there are images to load
            if (imageUrls.length > 0) {
                let loadedImages = 0;
                const totalImages = imageUrls.length;

                imageUrls.forEach(url => {
                    const img = new Image();
                    img.onload = img.onerror = () => {
                        loadedImages++;
                        if (loadedImages === totalImages) {
                            hidePreloader();
                        }
                    };
                    img.src = url;
                });
            } else {
                // No images to load, hide immediately
                hidePreloader();
            }

            function hidePreloader() {
                setTimeout(() => {
                    preloader.classList.add('hide');
                    setTimeout(() => {
                        preloader.style.display = 'none';
                    }, 500);
                }, 500);
            }
        });

        const message = `Happy Valentine's Day!

I just want to say thank you for being the most patient person alive. Especially when I'm dramatic, overthinking, pretending I'm fine, or randomly needy for attention.

If our relationship were an app, I'm pretty sure it would have a 5-star rating. Sure, there are occasional bugs‚Ä¶ but we always update together. The server may lag sometimes, but at least we've never uninstalled each other.

I love how you can turn the most ordinary day into something special. Even a simple "Have you eaten?" from you somehow feels like emotional vitamin C.

If I had to choose between:
Unlimited chocolate for life
or
You

Obviously, I'd choose you. Chocolate makes me gain weight. You make me gain happiness (and maybe a little attachment, but the cute kind).

Thank you for being my late night conversation partner, my favorite person to laugh at nothing with, my safe place after small arguments, and my constant reminder that love can feel steady and sweet at the same time.

At the end of the day, I choose us.
Not winning. Not ego. Just us.

I love you.
And I'm really, really lucky you're mine.

Happy Valentine's Day ‚ù§Ô∏è`;

        exitButton.addEventListener('click', () => {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) {
                document.msExitFullscreen();
            }
        });

        function getInfinityPosition(t) {
            const scale = 90;
            const x = scale * Math.cos(t) / (1 + Math.sin(t) * Math.sin(t));
            const y = scale * Math.sin(t) * Math.cos(t) / (1 + Math.sin(t) * Math.sin(t));

            return {
                x: 200 + x,
                y: 100 + y
            };
        }

        function drawPath() {
            let pathData = 'M ';
            const steps = 200;
            for (let i = 0; i <= steps; i++) {
                const t = (i / steps) * Math.PI * 2;
                const pos = getInfinityPosition(t);
                pathData += `${pos.x},${pos.y} `;
                if (i === 0) pathData += 'L ';
            }
            pathLine.setAttribute('d', pathData);
        }

        drawPath();

        function animate() {
            t1 += speed;
            t2 += speed;

            const pos1 = getInfinityPosition(t1);
            const pos2 = getInfinityPosition(t2);

            dot1.style.left = pos1.x + 'px';
            dot1.style.top = pos1.y + 'px';
            dot2.style.left = pos2.x + 'px';
            dot2.style.top = pos2.y + 'px';

            requestAnimationFrame(animate);
        }

        function checkProximity() {
            const pos1 = getInfinityPosition(t1);
            const pos2 = getInfinityPosition(t2);
            const distance = Math.sqrt(Math.pow(pos1.x - pos2.x, 2) + Math.pow(pos1.y - pos2.y, 2));
            return distance < 45;
        }

        clickZone.addEventListener('click', (e) => {
            if (firstClick) {
                feedback.style.opacity = '0';
                firstClick = true;
            }

            if (checkProximity()) {
                score++;
                scoreEl.textContent = score;
                showFeedback('* PERFECT! *', true);

                dot1.style.transform = 'translate(-50%, -50%) scale(1.5)';
                dot2.style.transform = 'translate(-50%, -50%) scale(1.5)';
                setTimeout(() => {
                    dot1.style.transform = 'translate(-50%, -50%) scale(1)';
                    dot2.style.transform = 'translate(-50%, -50%) scale(1)';
                }, 200);

                if (score >= targetScore) {
                    setTimeout(showMessage, 500);
                }
            } else {
                showFeedback('* Try Again! *', false);
            }
        });

        function showFeedback(text, isSuccess) {
            feedback.textContent = text;
            feedback.className = 'feedback show ' + (isSuccess ? 'success' : 'fail');
            setTimeout(() => {
                feedback.className = 'feedback';
            }, 1000);
        }

        function createFloatingHeart() {
            const isImage = Math.random() < 0.1;

            if (isImage && imageUrls.length > 0) {
                const img = document.createElement('img');
                img.className = 'floating-heart';
                img.src = imageUrls[Math.floor(Math.random() * imageUrls.length)];
                img.style.width = '80px';
                img.style.height = '80px';
                img.style.objectFit = 'cover';
                img.style.borderRadius = '10px';
                img.style.opacity = '0.7';

                const messageRect = messageContainer.getBoundingClientRect();
                let x, y;

                const leftOrRight = Math.random() < 0.5;

                if (leftOrRight) {
                    x = Math.random() < 0.5 ? Math.random() * messageRect.left : messageRect.right + Math.random() * (window.innerWidth - messageRect.right);
                    y = Math.random() * window.innerHeight;
                } else {
                    x = Math.random() * window.innerWidth;
                    y = Math.random() < 0.5 ? Math.random() * messageRect.top : messageRect.bottom + Math.random() * (window.innerHeight - messageRect.bottom);
                }

                img.style.left = x + 'px';
                img.style.top = y + 'px';

                floatingHeartsContainer.appendChild(img);

                setTimeout(() => {
                    img.remove();
                }, 4000);
            } else {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.textContent = ['üíñ', 'üíù', 'üíó', 'üíì', 'üíï'][Math.floor(Math.random() * 5)];

                const messageRect = messageContainer.getBoundingClientRect();
                let x, y;

                const leftOrRight = Math.random() < 0.5;

                if (leftOrRight) {
                    x = Math.random() < 0.5 ? Math.random() * messageRect.left : messageRect.right + Math.random() * (window.innerWidth - messageRect.right);
                    y = Math.random() * window.innerHeight;
                } else {
                    x = Math.random() * window.innerWidth;
                    y = Math.random() < 0.5 ? Math.random() * messageRect.top : messageRect.bottom + Math.random() * (window.innerHeight - messageRect.bottom);
                }

                heart.style.left = x + 'px';
                heart.style.top = y + 'px';

                floatingHeartsContainer.appendChild(heart);

                setTimeout(() => {
                    heart.remove();
                }, 4000);
            }
        }

        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.textContent = ['üíñ', 'üíù', 'üíó', 'üíì', 'üíï'][Math.floor(Math.random() * 5)];

        const messageRect = messageContainer.getBoundingClientRect();
        let x, y;

        const leftOrRight = Math.random() < 0.5;
        const topOrBottom = Math.random() < 0.5;

        if (leftOrRight) {
            x = Math.random() < 0.5 ? Math.random() * messageRect.left : messageRect.right + Math.random() * (window.innerWidth - messageRect.right);
            y = Math.random() * window.innerHeight;
        } else {
            x = Math.random() * window.innerWidth;
            y = Math.random() < 0.5 ? Math.random() * messageRect.top : messageRect.bottom + Math.random() * (window.innerHeight - messageRect.bottom);
        }

        heart.style.left = x + 'px';
        heart.style.top = y + 'px';

        floatingHeartsContainer.appendChild(heart);

        setTimeout(() => {
            heart.remove();
        }, 4000);

        function startFloatingHearts() {
            floatingHeartsContainer.classList.add('active');
            setInterval(() => {
                createFloatingHeart();
            }, 300);
        }

        function showMessage() {
            clickZone.style.display = 'none';

            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log('Fullscreen request failed:', err);
                });
            } else if (document.documentElement.webkitRequestFullscreen) {
                document.documentElement.webkitRequestFullscreen();
            } else if (document.documentElement.msRequestFullscreen) {
                document.documentElement.msRequestFullscreen();
            }

            dot1.classList.add('fade-out');
            dot2.classList.add('fade-out');
            centerTarget.classList.add('fade-out');
            infinityContainer.classList.add('fade-out');

            setTimeout(() => {
                centerLine.classList.add('show');

                setTimeout(() => {
                    title.classList.add('shake');
                    instruction.classList.add('shake');
                    scoreDiv.classList.add('shake');
                    feedback.classList.add('shake');

                    setTimeout(() => {
                        const elements = [
                            { el: title, delay: 0 },
                            { el: instruction, delay: 100 },
                            { el: scoreDiv, delay: 150 },
                            { el: feedback, delay: 80 }
                        ];

                        elements.sort(() => Math.random() - 0.5);

                        elements.forEach((item) => {
                            setTimeout(() => {
                                item.el.classList.remove('shake');
                                item.el.classList.add('fall');
                            }, item.delay);
                        });

                        setTimeout(() => {
                            centerLine.classList.add('expand');

                            setTimeout(() => {
                                gameSection.style.display = 'none';
                                messageContainer.classList.add('show');
                                messageContainer.classList.add('fade-in');

                                setTimeout(() => {
                                    fadeInWords(message, 0);
                                    startFloatingHearts();
                                }, 1000);
                            }, 1500);
                        }, 1500);
                    }, 2000);
                }, 1200);
            }, 2500);
        }

        function fadeInWords(text, index) {
            const words = text.split(/(\s+)/);
            if (index < words.length) {
                const span = document.createElement('span');
                span.textContent = words[index];
                span.style.animationDelay = '0s';
                typewriterEl.insertBefore(span, exitButton);
                setTimeout(() => fadeInWords(text, index + 1), 80);
            } else {
                exitButton.classList.add('show');
            }
        }

        animate();
    </script>
</body>

</html>